<Window x:Class="Mobius.Views.SteamSearchWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Steam Search"
        Width="760"
        Height="560"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

	<Border Background="{StaticResource BgWindowBrush}" CornerRadius="22" Padding="14">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<!-- Top -->
			<Grid Grid.Row="0" Margin="0,0,0,10">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBlock Text="ÐŸÐ¾Ð¸ÑÐº Ð² Steam"
                           Style="{StaticResource H1}"
                           VerticalAlignment="Center"
                           Margin="6,0,0,0"/>

				<Button Grid.Column="1"
                        Style="{StaticResource MiniWindowButton}"
                        Background="{StaticResource RedBrush}"
                        Content="+"
                        ToolTip="Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"
                        Command="{Binding CloseCommand}"/>
			</Grid>

			<!-- Search bar -->
			<Border Grid.Row="1"
                    Background="{StaticResource BgSurfaceBrush}"
                    CornerRadius="18"
                    Padding="12"
                    Margin="0,0,0,10">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<TextBox Text="{Binding Query, UpdateSourceTrigger=PropertyChanged}"
                             FontSize="14"
                             Padding="10,6"
                             VerticalContentAlignment="Center"
                             Background="{StaticResource BgSurface2Brush}"
                             Foreground="{StaticResource TextPrimaryBrush}"
                             BorderBrush="#00000000"/>

					<Button Grid.Column="1"
                            Style="{StaticResource IconButton}"
                            Background="{StaticResource GreenBrush}"
                            Content="ðŸ”"
                            Width="64"
                            Margin="10,0,0,0"
                            Command="{Binding SearchCommand}"/>
				</Grid>
			</Border>

			<!-- Results -->
			<Border Grid.Row="2"
                    Background="{StaticResource BgSurfaceBrush}"
                    CornerRadius="18"
                    Padding="12">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>

					<TextBlock Text="{Binding Status}"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="4,0,0,10"/>

					<ListBox Grid.Row="1"
                             ItemsSource="{Binding Results}"
                             SelectedItem="{Binding Selected}"
                             Background="#00000000"
                             BorderBrush="#00000000"
                             ScrollViewer.VerticalScrollBarVisibility="Auto">
						<ListBox.ItemTemplate>
							<DataTemplate>
								<Border Background="{StaticResource BgSurface2Brush}"
                                        CornerRadius="16"
                                        Padding="10"
                                        Margin="0,0,0,10">
									<Grid>
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="72"/>
											<ColumnDefinition Width="*"/>
											<ColumnDefinition Width="Auto"/>
										</Grid.ColumnDefinitions>

										<!-- square icon -->
										<Border Width="60" Height="60"
                                                CornerRadius="14"
                                                Background="{StaticResource BgWindowBrush}">
											<Image Source="{Binding IconPath}" Stretch="UniformToFill"/>
										</Border>

										<StackPanel Grid.Column="1" Margin="12,0,0,0">
											<TextBlock Text="{Binding Name}"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       FontSize="16"
                                                       FontWeight="SemiBold"
                                                       TextTrimming="CharacterEllipsis"/>
											<TextBlock Text="{Binding AppId, StringFormat=AppID: {0}}"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="12"
                                                       Margin="0,6,0,0"/>
										</StackPanel>

										<TextBlock Grid.Column="2"
                                                   Text="â€º"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="22"
                                                   VerticalAlignment="Center"
                                                   Margin="10,0,4,0"/>
									</Grid>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</Grid>
			</Border>

			<!-- Bottom -->
			<Grid Grid.Row="3" Margin="0,10,0,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<TextBlock Text="Ð’Ñ‹Ð±ÐµÑ€Ð¸ Ð¸Ð³Ñ€Ñƒ Ð¸ Ð½Ð°Ð¶Ð¼Ð¸ Â«Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒÂ»"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           VerticalAlignment="Center"
                           Margin="6,0,0,0"/>

				<Button Grid.Column="1"
                        Style="{StaticResource IconButton}"
                        Background="{StaticResource PurpleBar2Brush}"
                        Content="ï¼‹"
                        Width="64"
                        Command="{Binding AddSelectedCommand}"/>
			</Grid>
		</Grid>
	</Border>
</Window>
